<!-- Título con info del paciente -->
<div class="page-title">
    <h1>Añadir Medicamento</h1>
    <p class="patient-info" *ngIf="patient">{{ patient?.name }} {{ patient?.lastname }} - DNI: {{ patient?.dni }}</p>
</div>

<div class="form-container">
    <div class="form-card">
        <div class="form-header">
            <img src="../../../../assets/Medicamentos.png" alt="Medicamentos">
        </div>
        
        <form (ngSubmit)="formSubmit()">
            <mat-form-field class="full-width" appearance="outline">
                <mat-label>Nombre del medicamento</mat-label>
                <mat-select
                    required
                    [(ngModel)]="medicine.name"
                    name="medicineName"
                    (selectionChange)="onMedicineSelectionChange()">
                    <mat-option *ngFor="let option of medicineOptions" [value]="option">
                        {{ option }}
                    </mat-option>
                </mat-select>
            </mat-form-field>

            <mat-form-field class="full-width" appearance="outline">
                <mat-label>Descripción</mat-label>
                <input
                    [(ngModel)]="medicine.description"
                    name="description"
                    matInput
                    placeholder="Descripción del medicamento"
                    [disabled]="true"
                />
            </mat-form-field>

            <mat-form-field class="full-width" appearance="outline">
                <mat-label>Comentarios</mat-label>
                <textarea
                    [(ngModel)]="medicine.comments"
                    name="comments"
                    matInput
                    placeholder="Ingrese indicaciones o comentarios adicionales"
                    rows="3">
                </textarea>
            </mat-form-field>

            <mat-form-field class="full-width" appearance="outline">
                <mat-label>Inicio del tratamiento</mat-label>
                <input
                    [(ngModel)]="medicine.prescriptionDay"
                    name="prescriptionDay"
                    matInput
                    [matDatepicker]="picker"
                    [min]="today"
                    placeholder="Seleccione la fecha de inicio"
                    required
                />
                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-datepicker #picker></mat-datepicker>
            </mat-form-field>

            <div class="button-group">
                <button type="submit" class="btn-primary">
                    <i class="fas fa-plus"></i> Añadir
                </button>
                <button type="reset" class="btn-secondary">
                    <i class="fas fa-eraser"></i> Limpiar
                </button>
            </div>
        </form>
    </div>
</div>
