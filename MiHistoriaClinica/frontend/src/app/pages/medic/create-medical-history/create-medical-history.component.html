<div class="page-title">
    <h1>Historia Clínica</h1>
    <p class="patient-info" *ngIf="patient">{{ patient?.name }} {{ patient?.lastname }} - DNI: {{ patient?.dni }}</p>
</div>

<div class="form-container">
    <div class="form-card">
        <div class="form-header">
            <img src="../../../../assets/MH.png" alt="Historia Clínica">
        </div>
        
        <form (ngSubmit)="formSubmit()">
            <div class="form-row">
                <mat-form-field class="half-width" appearance="outline">
                    <mat-label>Altura (cm)</mat-label>
                    <input required [(ngModel)]="medicalHistoryModel.height" name="height" matInput
                           placeholder="Ej: 170" type="number">
                </mat-form-field>

                <mat-form-field class="half-width" appearance="outline">
                    <mat-label>Peso (kg)</mat-label>
                    <input required [(ngModel)]="medicalHistoryModel.weight" name="weight" matInput
                           placeholder="Ej: 70" type="number">
                </mat-form-field>
            </div>

            <mat-form-field class="full-width" appearance="outline">
                <mat-label>Grupo sanguíneo</mat-label>
                <mat-select required [(ngModel)]="medicalHistoryModel.bloodType" name="bloodType">
                    <mat-option *ngFor="let bloodType of bloodTypes" [value]="bloodType">
                        {{ bloodType }}
                    </mat-option>
                </mat-select>
            </mat-form-field>

            <mat-form-field class="full-width" appearance="outline">
                <mat-label>Alergias</mat-label>
                <textarea [(ngModel)]="medicalHistoryModel.allergy" name="allergy" matInput
                       placeholder="Ingrese alergias si las hay" rows="2"></textarea>
            </mat-form-field>

            <mat-form-field class="full-width" appearance="outline">
                <mat-label>Medicación crónica</mat-label>
                <textarea [(ngModel)]="medicalHistoryModel.actualMedicine" name="actualMedicine" matInput
                       placeholder="Ingrese los medicamentos en curso" rows="2"></textarea>
            </mat-form-field>

            <mat-form-field class="full-width" appearance="outline">
                <mat-label>Enfermedades crónicas</mat-label>
                <textarea [(ngModel)]="medicalHistoryModel.chronicDisease" name="chronicDisease" matInput
                       placeholder="Ingrese enfermedades crónicas" rows="2"></textarea>
            </mat-form-field>

            <mat-form-field class="full-width" appearance="outline">
                <mat-label>Antecedentes familiares</mat-label>
                <textarea [(ngModel)]="medicalHistoryModel.familyMedicalHistory" name="familyMedicalHistory" matInput
                       placeholder="Ingrese antecedentes familiares" rows="2"></textarea>
            </mat-form-field>

            <div class="button-group">
                <button type="submit" class="btn-primary">
                    <i class="fas fa-save"></i> Guardar
                </button>
                <button type="reset" class="btn-secondary">
                    <i class="fas fa-eraser"></i> Limpiar
                </button>
            </div>
        </form>
    </div>
</div>
