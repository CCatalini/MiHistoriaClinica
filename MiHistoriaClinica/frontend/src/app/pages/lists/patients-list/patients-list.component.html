<div class="container content-with-toolbar">
    <div class="page-title">
        <h1>Mis Pacientes</h1>
        <p class="subtitle">Gestiona y accede a la información de tus pacientes</p>
    </div>

    <div class="search-section">
        <h4>Buscar Paciente</h4>
        <div class="search-row">
            <div class="search-group">
                <i class="fas fa-search search-icon"></i>
                <input 
                    type="text" 
                    class="search-input" 
                    placeholder="Buscar por nombre o apellido..."
                    [(ngModel)]="searchTerm"
                    (input)="filterPatients()">
            </div>
        </div>
    </div>

    <div *ngIf="filteredPatients.length > 0" class="data-section">
        <div class="patients-grid">
            <div class="patient-card" *ngFor="let patient of filteredPatients">
                <div class="patient-header">
                    <div class="patient-avatar">
                        {{ getInitials(patient.name, patient.lastname) }}
                    </div>
                    <div class="patient-info">
                        <h3>{{ patient.name }} {{ patient.lastname }}</h3>
                        <p class="patient-dni"><i class="fas fa-id-card"></i> DNI: {{ patient.dni }}</p>
                        <p class="patient-email"><i class="fas fa-envelope"></i> {{ patient.email }}</p>
                    </div>
                </div>
                <div class="patient-actions">
                    <button class="btn-action btn-historia" (click)="verHistoriaClinica(patient)">
                        <i class="fas fa-file-medical"></i>
                        Historia Clínica
                    </button>
                    <button class="btn-action btn-consultas" (click)="verConsultas(patient)">
                        <i class="fas fa-notes-medical"></i>
                        Ver Consultas
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div *ngIf="filteredPatients.length === 0 && patients.length > 0" class="empty-section">
        <div class="empty-icon"><i class="fas fa-search"></i></div>
        <h3>No se encontraron pacientes</h3>
        <p>No hay pacientes que coincidan con "{{ searchTerm }}"</p>
    </div>

    <div *ngIf="patients.length === 0 && !isLoading" class="empty-section">
        <div class="empty-icon"><i class="fas fa-users"></i></div>
        <h3>No tienes pacientes registrados</h3>
        <p>Los pacientes aparecerán aquí una vez que te vincules con ellos usando su código de vinculación.</p>
    </div>

    <div *ngIf="isLoading" class="loading-section">
        <div class="spinner"></div>
        <p>Cargando pacientes...</p>
    </div>
</div>
