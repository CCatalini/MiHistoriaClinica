<div class="container content-with-toolbar">

    <!-- Título principal -->
    <div class="page-title">
        <h1>Historia Clínica</h1>
        <p class="subtitle" *ngIf="patient">{{ patient.name }} {{ patient.lastname }} - DNI: {{ patient.dni }}</p>
    </div>

    <!-- Botones de acción -->
    <div class="actions-section">
        <button class="boton" (click)="downloadPatientHistory()">
            <i class="fas fa-file-pdf"></i> Descargar PDF
        </button>
        <button class="boton boton-secondary" [routerLink]="'/medic/edit-medicalHistory'" [queryParams]="{ data: medicalHistory | json }">
            <i class="fas fa-edit"></i> Editar
        </button>
    </div>

    <!-- Ficha Médica -->
    <div class="medical-file-section" *ngIf="medicalHistory">
        <h2 class="text-center">Ficha Médica</h2>
        <div class="medical-file-content">
            <div class="medical-file-item">
                <span class="medical-file-label">Altura:</span>
                <span class="medical-file-value">{{ medicalHistory.height || '-' }} cm</span>
            </div>
            <div class="medical-file-item">
                <span class="medical-file-label">Peso:</span>
                <span class="medical-file-value">{{ medicalHistory.weight || '-' }} kg</span>
            </div>
            <div class="medical-file-item">
                <span class="medical-file-label">Grupo sanguíneo:</span>
                <span class="medical-file-value">{{ medicalHistory.bloodType || '-' }}</span>
            </div>
            <div class="medical-file-item">
                <span class="medical-file-label">Alergias:</span>
                <span class="medical-file-value">{{ medicalHistory.allergy || '-' }}</span>
            </div>
            <div class="medical-file-item">
                <span class="medical-file-label">Medicación crónica:</span>
                <span class="medical-file-value">{{ medicalHistory.actualMedicine || '-' }}</span>
            </div>
            <div class="medical-file-item">
                <span class="medical-file-label">Enfermedades crónicas:</span>
                <span class="medical-file-value">{{ medicalHistory.chronicDisease || '-' }}</span>
            </div>
            <div class="medical-file-item">
                <span class="medical-file-label">Antecedentes familiares:</span>
                <span class="medical-file-value">{{ medicalHistory.familyMedicalHistory || '-' }}</span>
            </div>
        </div>
    </div>

    <!-- Estado vacío -->
    <div class="empty-section" *ngIf="!medicalHistory && !isLoading">
        <div class="empty-icon"><i class="fas fa-file-medical"></i></div>
        <h3>No hay historia clínica</h3>
        <p>Este paciente aún no tiene una historia clínica registrada</p>
        <button class="boton" [routerLink]="'/medic/create-medicalHistory'">
            <i class="fas fa-plus"></i> Crear Historia Clínica
        </button>
    </div>

    <!-- Loading -->
    <div class="loading-section" *ngIf="isLoading">
        <div class="spinner"></div>
        <p>Cargando historia clínica...</p>
    </div>
</div>
